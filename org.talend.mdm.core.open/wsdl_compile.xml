<?xml version="1.0" encoding="UTF-8"?>
<project default="wsdl_all" name="XtentisCore - WSDLCompile">

	<property name="jwsdp.home" value="c:/opt/jwsdp-1.5" />
	<property name="source.dir" value="../org.talend.mdm.core/src" />
	<property name="bin.dir" value="./bin" />
	<property name="config.xml" value="./config.xml" />
	<property name="mapping.xml" value="./src/META-INF/mapping.xml" />

	<target name="wsdl_all">
		<exec executable="${jwsdp.home}/jaxrpc/bin/wscompile.bat">
			<arg line="-import" />
			<arg line="-verbose" />
			<arg line="-g" />
			<arg line="-mapping  ${mapping.xml}" />
			<arg line="-d ${bin.dir} -s ${source.dir}" />
			<arg line="-keep" />
			<arg line="-f:documentliteral" />
			<arg line="-f:wsi" />
			<arg line="-f:donotunwrap" />
			<arg line="-f:useonewayoperations" />
			<!--
			<arg line="-f:explicitcontext"/>
			<arg line="-f:searchschema"/>
			<arg line="-f:serializeinterfaces"/>
			-->
			<arg line="${config.xml}" />
		</exec>

		<echo>Move port files</echo>
		<move todir="./src/com/amalto/core/webservice">
			<fileset dir="../org.talend.mdm.core/src/com/amalto/core/webservice">
				<include name="XtentisPort.java" />
				<include name="XtentisPort_Impl.java" />
				<include name="XtentisService.java" />
			</fileset>
		</move>

		<echo>Refresh resources</echo>
		<eclipse.refreshLocal resource="org.talend.mdm.core" />
		<eclipse.refreshLocal resource="org.talend.mdm.core.open" />
	</target>

</project>